conky.config = {
    -- Window
    own_window = true,
    own_window_class = 'Conky',
    own_window_type = 'desktop',
    own_window_transparent = false,
    own_window_argb_visual = true,
    own_window_argb_value = 200,
    own_window_colour = '0d1117',
    own_window_hints = 'undecorated,below,sticky,skip_taskbar,skip_pager',

    -- Position & Size
    alignment = 'top_right',
    gap_x = 24,
    gap_y = 48,
    minimum_width = 320,
    maximum_width = 320,

    -- Borders & Margins
    border_width = 0,
    border_inner_margin = 16,
    border_outer_margin = 0,
    draw_borders = false,
    draw_outline = false,
    draw_shades = false,
    draw_graph_borders = false,

    -- Font & Colors
    use_xft = true,
    font = 'Mono:size=9',
    override_utf8_locale = true,
    default_color = 'c9d1d9',
    color1 = '58a6ff',         -- accent blue (headers)
    color2 = '8b949e',         -- muted gray (labels)
    color3 = '3fb950',         -- green (bars/good)
    color4 = 'd29922',         -- amber (warning)
    color5 = 'f85149',         -- red (critical)

    -- Behavior
    background = true,
    cpu_avg_samples = 4,
    net_avg_samples = 2,
    no_buffers = true,
    double_buffer = true,
    update_interval = 2.0,
    imlib_cache_size = 0,
    short_units = true,
    top_name_width = 14,
};

conky.text = [[
${color1}${font Mono:bold:size=12}SYSTEM${font}${color}
${color2}${hr 1}${color}
${color2}Host${alignr}${color}${nodename}
${color2}Kernel${alignr}${color}${kernel}
${color2}Uptime${alignr}${color}${uptime_short}
${color2}Packages${alignr}${color}${execi 3600 pacman -Q | wc -l}

${color1}${font Mono:bold:size=12}CPU${font}  ${color2}i9-13900K${alignr}${color}${hwmon coretemp temp 1}°C${color}
${color2}${hr 1}${color}
${color2}Usage${alignr}${color}${cpu cpu0}%
${color3}${cpubar cpu0 6}${color}
${color2}P-Cores${color}${alignr}${cpu cpu1}%  ${cpu cpu2}%  ${cpu cpu3}%  ${cpu cpu4}%
${alignr}${cpu cpu5}%  ${cpu cpu6}%  ${cpu cpu7}%  ${cpu cpu8}%
${color2}E-Cores${color}${alignr}${cpu cpu9}%  ${cpu cpu10}%  ${cpu cpu11}%  ${cpu cpu12}%
${alignr}${cpu cpu13}%  ${cpu cpu14}%  ${cpu cpu15}%  ${cpu cpu16}%
${alignr}${cpu cpu17}%  ${cpu cpu18}%  ${cpu cpu19}%  ${cpu cpu20}%
${alignr}${cpu cpu21}%  ${cpu cpu22}%  ${cpu cpu23}%  ${cpu cpu24}%
${color2}Frequency${alignr}${color}${freq_g}GHz
${color2}Load${alignr}${color}${loadavg}
${color2}Processes${alignr}${color}${processes} (${running_processes} running)

${color1}${font Mono:bold:size=12}GPU${font}  ${color2}RTX 4090${alignr}${color}${execi 2 ~/.config/conky/nvidia-stats.sh; awk '/GPU_TEMP/{print $2}' /tmp/conky-nvidia}°C${color}
${color2}${hr 1}${color}
${color2}Core Usage${alignr}${color}${exec awk '/GPU_UTIL/{print $2}' /tmp/conky-nvidia}%
${color3}${execbar awk '/GPU_UTIL/{print $2}' /tmp/conky-nvidia}${color}
${color2}Mem Usage${alignr}${color}${exec awk '/MEM_UTIL/{print $2}' /tmp/conky-nvidia}%
${color3}${execbar awk '/MEM_UTIL/{print $2}' /tmp/conky-nvidia}${color}
${color2}VRAM${alignr}${color}${exec awk '/VRAM_USED/{print $2}' /tmp/conky-nvidia} / ${exec awk '/VRAM_TOTAL/{print $2}' /tmp/conky-nvidia} MiB
${color2}Core Clock${alignr}${color}${exec awk '/CORE_CLK/{print $2}' /tmp/conky-nvidia} MHz
${color2}Mem Clock${alignr}${color}${exec awk '/MEM_CLK/{print $2}' /tmp/conky-nvidia} MHz
${color2}Power${alignr}${color}${exec awk '/^POWER /{print $2}' /tmp/conky-nvidia} / ${exec awk '/POWER_LIM/{print $2}' /tmp/conky-nvidia} W
${color2}Fan${alignr}${color}${exec awk '/FAN/{print $2}' /tmp/conky-nvidia}%
${color2}PState${alignr}${color}${exec awk '/PSTATE/{print $2}' /tmp/conky-nvidia}
${color2}Encoder${alignr}${color}${exec awk '/ENC/{print $2}' /tmp/conky-nvidia}%
${color2}Decoder${alignr}${color}${exec awk '/DEC/{print $2}' /tmp/conky-nvidia}%

${color1}${font Mono:bold:size=12}MEMORY${font}${alignr}${color}${mem} / ${memmax}
${color2}${hr 1}${color}
${color2}RAM${alignr}${color}${memperc}%
${color3}${membar 6}${color}
${color2}Swap${alignr}${color}${swapperc}%
${color3}${swapbar 6}${color}

${color1}${font Mono:bold:size=12}DISKS${font}${color}
${color2}${hr 1}${color}
${color2}/ ${color}${alignr}${fs_used /} / ${fs_size /}  (${fs_used_perc /}%)
${color3}${fs_bar 6 /}${color}
${color2}/home ${color}${alignr}${fs_used /home} / ${fs_size /home}  (${fs_used_perc /home}%)
${color3}${fs_bar 6 /home}${color}
${color2}Read ${color}${diskio_read nvme2n1}${alignr}${color2}Write ${color}${diskio_write nvme2n1}

${color1}${font Mono:bold:size=12}NETWORK${font}${color}
${color2}${hr 1}${color}
${if_up eno1}${color2}eno1${color}${alignr}${addr eno1}
${color2}Down ${color}${downspeed eno1}${alignr}${color2}Up ${color}${upspeed eno1}
${color3}${downspeedgraph eno1 24,150}${alignr}${color4}${upspeedgraph eno1 24,150}${color}
${endif}${if_up wlp0s20f3}${color2}wifi${color}${alignr}${addr wlp0s20f3}
${color2}Down ${color}${downspeed wlp0s20f3}${alignr}${color2}Up ${color}${upspeed wlp0s20f3}
${color3}${downspeedgraph wlp0s20f3 24,150}${alignr}${color4}${upspeedgraph wlp0s20f3 24,150}${color}
${endif}
${color1}${font Mono:bold:size=12}TOP CPU${font}${color}
${color2}${hr 1}${color}
${color2}Name              PID    CPU%${color}
${top name 1} ${top pid 1} ${top cpu 1}%
${top name 2} ${top pid 2} ${top cpu 2}%
${top name 3} ${top pid 3} ${top cpu 3}%
${top name 4} ${top pid 4} ${top cpu 4}%
${top name 5} ${top pid 5} ${top cpu 5}%

${color1}${font Mono:bold:size=12}TOP MEM${font}${color}
${color2}${hr 1}${color}
${color2}Name              PID    MEM%${color}
${top_mem name 1} ${top_mem pid 1} ${top_mem mem 1}%
${top_mem name 2} ${top_mem pid 2} ${top_mem mem 2}%
${top_mem name 3} ${top_mem pid 3} ${top_mem mem 3}%
${top_mem name 4} ${top_mem pid 4} ${top_mem mem 4}%
${top_mem name 5} ${top_mem pid 5} ${top_mem mem 5}%

${color1}${font Mono:bold:size=12}UPDATES${font}${color}
${color2}${hr 1}${color}
${color2}Pacman${alignr}${color}${execi 3600 checkupdates 2>/dev/null | wc -l} pending
${color2}AUR${alignr}${color}${execi 3600 yay -Qua 2>/dev/null | wc -l} pending
]];
